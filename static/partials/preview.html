<div class="relative w-full max-w-xl mx-auto">

    <div id="toast" class="hidden absolute -top-6 right-28
         bg-[#F7FAFC] text-gray-600 px-4 py-2 rounded-md shadow-lg border border-gray-200
         text-sm opacity-0 transition-opacity duration-300 z-50 flex items-center gap-2">
        <i data-lucide="alert-triangle" class="w-4 h-4 text-orange-500"></i>
        <span id="toast-text"></span>
    </div>

    <form hx-post="/preview-url" hx-target="#result">

        <label class="block text-sm font-medium text-gray-700 mb-2">
            Enter Short URL
        </label>

        <div class="relative">
            <textarea id="url-input" name="url" placeholder="Provide a short URL created using Go MiniURL" rows="1"
                class="w-full min-h-[2.5rem] p-2 pr-8 border rounded-lg resize-none overflow-hidden focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-500 text-sm leading-normal"
                oninput="
                    this.style.height='auto';
                    this.style.height=this.scrollHeight + 'px';
                    document.getElementById('clear-btn').classList.toggle('hidden', !this.value);"
                onfocus="document.getElementById('clear-btn').classList.toggle('hidden', !this.value);"
                required></textarea>

            <!-- Clear button -->
            <button id="clear-btn" type="button" title="Clear" class="absolute right-2 top-2 hidden text-gray-500 hover:text-gray-700"
                onclick="
                    const t = document.getElementById('url-input');
                    t.value = '';
                    t.style.height = 'auto';
                    this.classList.add('hidden'); t.focus();
                    document.getElementById('result').innerHTML = '';
                    t.value = '';
                ">
                <i data-lucide="x" class="w-4 h-4">X</i>
            </button>
        </div>

        <!-- Submit -->
        <div class="mt-4 flex justify-center">
            <button type="submit" class="w-full sm:w-40 px-6 py-3 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 transition">
                Submit
            </button>
        </div>

    </form>

    <!-- Result -->
    <div id="result" class="mt-12 p-3 rounded-lg text-center text-sm text-gray-700 break-all">
        <!-- Result will be injected here -->
    </div>
</div>
