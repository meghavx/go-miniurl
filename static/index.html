<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Go MiniURL</title>
        <link rel="icon" type="image/png" href="/static/icon.png" />
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://unpkg.com/htmx.org@1.9.10"></script>
        <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    </head>

    <body class="h-screen flex flex-col justify-between bg-[#F7FAFC] text-gray-800">
        <header class="w-full flex items-center justify-between p-4 text-white border-b border-gray-200 bg-[#3163EA]">
            <div class="flex items-center gap-3 cursor-default">
                <div class="w-6 h-6 sm:w-9 sm:h-9 flex items-center justify-center rounded-full bg-[#F7FAFC]">
                    <i data-lucide="link" class="w-3 h-3 sm:w-5 sm:h-5 text-[#3163EA]" style="stroke-width:2.75;"></i>
                </div>
                <span class="text-lg sm:text-2xl font-light cursor-pointer" hx-get="/static/partials/home.html" hx-target="#main-content">
                   Go MiniURL
                </span>
            </div>
            <nav class="flex gap-4 sm:gap-6 text-sm sm:text-base">
                <a hx-get="/static/partials/home.html" hx-target="#main-content" class="cursor-pointer">Home</a>
                <a hx-get="/static/partials/about.html" hx-target="#main-content" class="cursor-pointer">About</a>
            </nav>
        </header>

        <main id="main-content" class="flex-1 flex flex-col items-center justify-center px-6"
              hx-get="/static/partials/home.html"
              hx-target="#main-content"
              hx-trigger="load">
        </main>

        <footer class="flex flex-col gap-4 w-full py-4 sm:py-6 border-t bg-white text-center">
            <div class="flex items-center justify-center gap-3 text-gray-600">
                <a href="https://www.linkedin.com/in/meghaaverma" target="_blank">
                    <i data-lucide="linkedin" class="w-4 h-4"></i>
                </a>
                <a href="https://github.com/meghavx" target="_blank">
                    <i data-lucide="github" class="w-4 h-4"></i>
                </a>
                <a href="mailto:meghaverma.pi@gmail.com">
                    <i data-lucide="mail" class="w-4 h-4"></i>
                </a>
            </div>
            <div class="text-xs text-gray-500">Â© 2025 Megha Verma</div>
        </footer>

        <script>
            // Show a toast notification when any HTMX request returns a (4xx / 5xx) error
            document.body.addEventListener("htmx:responseError", evt => {
                const toast = document.getElementById("toast");
                document.getElementById("toast-text").textContent =
                    evt.detail.xhr.responseText || "Something went wrong";
                toast.classList.remove("hidden");
                requestAnimationFrame(() => toast.classList.add("opacity-100"));
                setTimeout(() => toast.classList.remove("opacity-100"), 4000);
                setTimeout(() => toast.classList.add("hidden"), 4500);
            });

            // Convert UTC timestamps rendered by the backend into the user's local time
            const convertUTCToLocal = () => {
                const elem = document.getElementById("last-visited");
                if (!elem) return;
                const date = new Date(elem.dataset.utc);
                elem.textContent = isNaN(date.getTime())
                    ? "Never"
                    : date.toLocaleString(undefined, {
                        dateStyle: "medium",
                        timeStyle: "short"
                    });
            };

            // Re-initialize Lucide icons after DOM changes (initial load or HTMX swaps)
            const initLucide = () => window.lucide?.createIcons();
            ["DOMContentLoaded", "load", "htmx:afterSwap"].forEach(e =>
                document.addEventListener(e, () => {
                    initLucide();
                    convertUTCToLocal();
                })
            );
        </script>

    </body>

</html>
